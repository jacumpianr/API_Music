openapi: 3.0.3
info:
  title: Music_API
  version: "1.0.0"
  description: >
    API REST para gestionar artistas, álbumes y canciones.
  contact:
    name: Soporte API

x-tagGroups:
  - name: General
    tags:
      - Artistas
      - Albumes
      - Canciones
  - name: Modelos de Datos
    tags:
      - Modelos

servers:
  - url: https://api-music-rose.vercel.app

tags:
  - name: Artistas
    description: Gestión de cantantes y bandas
  - name: Albumes
    description: Gestión de discos
  - name: Canciones
    description: Gestión de pistas de audio
  - name: Modelos
    description: Modelos de datos

paths:
  # ==========================================
  #                 ARTISTAS
  # ==========================================
  /artistas:
    get:
      summary: Obtener todos los artistas
      tags: [Artistas]
      x-codeSamples:
        - lang: JavaScript
          label: JS (fetch)
          source: |
            fetch("https://api-music-rose.vercel.app/artistas")
              .then(r => r.json())
              .then(console.log);
        - lang: cURL / HTTPie
          source: |
            curl https://api-music-rose.vercel.app/artistas
      responses:
        '200':
          description: Lista de artistas recuperada exitosamente
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Artista'
        '500':
          description: Error interno del servidor

    post:
      summary: Crear un artista
      tags: [Artistas]
      requestBody:
        description: Datos del artista a crear
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ArtistaInput'
            example:
              Nombre: "Alejandra Guzmán"
              Nacionalidad: "México"
              FechaNacimientos: "1968-02-09"
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ArtistaInput'
      x-codeSamples:
        - lang: JavaScript
          source: |
            fetch("https://api-music-rose.vercel.app/artistas", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                Nombre: "Alejandra Guzmán",
                Nacionalidad: "México",
                FechaNacimientos: "1968-02-09"
              })
            }).then(r => r.json()).then(console.log);
        - lang: Python
          source: |
            import requests
            payload = {
              "Nombre": "Alejandra Guzmán",
              "Nacionalidad": "México",
              "FechaNacimientos": "1968-02-09"
            }
            r = requests.post("https://api-music-rose.vercel.app/artistas", json=payload)
            print(r.status_code, r.text)
        - lang: cURL / HTTPie
          source: |
            http POST https://api-music-rose.vercel.app/artistas \
              Nombre="Alejandra Guzmán" \
              Nacionalidad="México" \
              FechaNacimientos="1968-02-09"
      responses:
        '201':
          description: Artista creado correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Artista'
        '400':
          description: Datos inválidos (faltan campos, tipos incorrectos)
        '422':
          description: Error de validación (formato inválido)
        '500':
          description: Error interno del servidor

  /artistas/{id}:
    get:
      summary: Obtener un artista por ID
      tags: [Artistas]
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Detalle del artista
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Artista'
        '404':
          description: Artista no encontrado
          content:
            application/json:
              example: { "error": "No existe un artista con ese ID" }
        '500':
          description: Error interno del servidor

    put:
      summary: Actualizar un artista (completo)
      tags: [Artistas]
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      requestBody:
        description: Reemplaza todos los campos del artista
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ArtistaInput'
            example:
              Nombre: "Gustavo Cerati"
              Nacionalidad: "Argentina"
              FechaNacimientos: "1967-08-11"
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ArtistaInput'
      x-codeSamples:
        - lang: JavaScript
          source: |
            fetch("https://api-music-rose.vercel.app/artistas/1", {
              method: "PUT",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                Nombre: "Gustavo Cerati",
                Nacionalidad: "Argentina",
                FechaNacimientos: "1967-08-11"
              })
            }).then(r => r.json()).then(console.log);
        - lang: Python
          source: |
            import requests
            payload = {
              "Nombre": "Gustavo Cerati",
              "Nacionalidad": "Argentina",
              "FechaNacimientos": "1967-08-11"
            }
            r = requests.put("https://api-music-rose.vercel.app/artistas/1", json=payload)
            print(r.status_code, r.text)
        - lang: cURL / HTTPie
          source: |
            http PUT https://api-music-rose.vercel.app/artistas/1 \
              Nombre="Gustavo Cerati" \
              Nacionalidad="Argentina" \
              FechaNacimientos="1967-08-11"
      responses:
        '200':
          description: Artista actualizado correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Artista'
        '400':
          description: Datos inválidos
        '404':
          description: Artista no encontrado
        '422':
          description: Error de validación (formato inválido)
        '500':
          description: Error interno del servidor

    patch:
      summary: Actualizar parcialmente un artista
      tags: [Artistas]
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      requestBody:
        description: Campos a modificar del artista (parcial)
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ArtistaPatch'
            example:
              Nombre: "Nombre Corregido"
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ArtistaPatch'
      x-codeSamples:
        - lang: JavaScript
          source: |
            fetch("https://api-music-rose.vercel.app/artistas/1", {
              method: "PATCH",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ Nombre: "Nombre Corregido" })
            }).then(r => r.json()).then(console.log);
        - lang: Python
          source: |
            import requests
            r = requests.patch("https://api-music-rose.vercel.app/artistas/1", json={"Nombre":"Nombre Corregido"})
            print(r.status_code, r.text)
        - lang: cURL / HTTPie
          source: |
            http PATCH https://api-music-rose.vercel.app/artistas/1 Nombre="Nombre Corregido"
      responses:
        '200':
          description: Actualizado parcialmente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Artista'
        '400':
          description: Datos inválidos
        '404':
          description: Artista no encontrado
        '422':
          description: Error de validación
        '500':
          description: Error interno del servidor

    delete:
      summary: Eliminar un artista
      tags: [Artistas]
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Artista eliminado correctamente
        '404':
          description: Artista no encontrado
        '500':
          description: Error interno del servidor

  # ==========================================
  #                 ALBUMES
  # ==========================================
  /albumes:
    get:
      summary: Obtener todos los álbumes
      tags: [Albumes]
      x-codeSamples:
        - lang: JavaScript
          label: JS (fetch)
          source: |
            fetch("https://api-music-rose.vercel.app/albumes")
              .then(r => r.json())
              .then(console.log);
        - lang: cURL / HTTPie
          source: |
            curl https://api-music-rose.vercel.app/albumes
      responses:
        '200':
          description: Lista de álbumes
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Album'
        '500':
          description: Error interno del servidor

    post:
      summary: Crear un álbum
      tags: [Albumes]
      requestBody:
        description: Datos del álbum a crear
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AlbumInput'
            example:
              Titulo: "Flor de Papel"
              FechaLanzamiento: "1991-10-15"
              IdArtista: 1
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AlbumInput'
      x-codeSamples:
        - lang: JavaScript
          source: |
            fetch("https://api-music-rose.vercel.app/albumes", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                Titulo: "Flor de Papel",
                FechaLanzamiento: "1991-10-15",
                IdArtista: 1
              })
            }).then(r => r.json()).then(console.log);
        - lang: Python
          source: |
            import requests
            payload = {
              "Titulo": "Flor de Papel",
              "FechaLanzamiento": "1991-10-15",
              "IdArtista": 1
            }
            r = requests.post("https://api-music-rose.vercel.app/albumes", json=payload)
            print(r.status_code, r.text)
        - lang: cURL / HTTPie
          source: |
            http POST https://api-music-rose.vercel.app/albumes \
              Titulo="Flor de Papel" \
              FechaLanzamiento="1991-10-15" \
              IdArtista:=1
      responses:
        '201':
          description: Álbum creado correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Album'
        '400':
          description: Faltan datos obligatorios (Titulo o IdArtista)
        '404':
          description: El artista referenciado no existe
        '422':
          description: Error de validación
        '500':
          description: Error interno del servidor

  /albumes/{id}:
    get:
      summary: Obtener un álbum por ID
      tags: [Albumes]
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Detalle del álbum
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Album'
        '404':
          description: Álbum no encontrado
        '500':
          description: Error interno del servidor

    put:
      summary: Actualizar un álbum (completo)
      tags: [Albumes]
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        description: Reemplaza todos los campos del álbum
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AlbumInput'
            example:
              Titulo: "Flor de Papel (Remaster)"
              FechaLanzamiento: "1992-05-01"
              IdArtista: 1
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AlbumInput'
      x-codeSamples:
        - lang: JavaScript
          source: |
            fetch("https://api-music-rose.vercel.app/albumes/1", {
              method: "PUT",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                Titulo: "Flor de Papel (Remaster)",
                FechaLanzamiento: "1992-05-01",
                IdArtista: 1
              })
            }).then(r => r.json()).then(console.log);
        - lang: Python
          source: |
            import requests
            payload = {
              "Titulo": "Flor de Papel (Remaster)",
              "FechaLanzamiento": "1992-05-01",
              "IdArtista": 1
            }
            r = requests.put("https://api-music-rose.vercel.app/albumes/1", json=payload)
            print(r.status_code, r.text)
        - lang: cURL / HTTPie
          source: |
            http PUT https://api-music-rose.vercel.app/albumes/1 \
              Titulo="Flor de Papel (Remaster)" \
              FechaLanzamiento="1992-05-01" \
              IdArtista:=1
      responses:
        '200':
          description: Álbum actualizado correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Album'
        '400':
          description: Datos inválidos
        '404':
          description: Álbum o Artista no encontrado
        '422':
          description: Error de validación
        '500':
          description: Error interno del servidor

    patch:
      summary: Actualizar parcialmente un álbum
      tags: [Albumes]
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        description: Campos a modificar del álbum (parcial)
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AlbumPatch'
            example:
              Titulo: "Título Editado"
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AlbumPatch'
      x-codeSamples:
        - lang: JavaScript
          source: |
            fetch("https://api-music-rose.vercel.app/albumes/1", {
              method: "PATCH",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ Titulo: "Título Editado" })
            }).then(r => r.json()).then(console.log);
        - lang: Python
          source: |
            import requests
            r = requests.patch("https://api-music-rose.vercel.app/albumes/1", json={"Titulo":"Título Editado"})
            print(r.status_code, r.text)
        - lang: cURL / HTTPie
          source: |
            http PATCH https://api-music-rose.vercel.app/albumes/1 Titulo="Título Editado"
      responses:
        '200':
          description: Álbum actualizado parcialmente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Album'
        '400':
          description: Datos inválidos
        '404':
          description: Álbum no encontrado
        '422':
          description: Error de validación
        '500':
          description: Error interno del servidor

    delete:
      summary: Eliminar un álbum
      tags: [Albumes]
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Álbum eliminado correctamente
        '404':
          description: Álbum no encontrado
        '500':
          description: Error interno del servidor

  # ==========================================
  #                 CANCIONES
  # ==========================================
  /canciones:
    get:
      summary: Obtener todas las canciones
      tags: [Canciones]
      x-codeSamples:
        - lang: JavaScript
          label: JS (fetch)
          source: |
            fetch("https://api-music-rose.vercel.app/canciones")
              .then(r => r.json())
              .then(console.log);
        - lang: cURL / HTTPie
          source: |
            curl https://api-music-rose.vercel.app/canciones
      responses:
        '200':
          description: Lista de canciones
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Cancion'
        '500':
          description: Error interno del servidor

    post:
      summary: Crear una canción
      tags: [Canciones]
      requestBody:
        description: Datos de la canción a crear
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CancionInput'
            example:
              Titulo: "Hacer el amor con otro"
              Duracion: "04:38"
              Genero: "Rock"
              IdAlbum: 10
              IdArtista: 1
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CancionInput'
      x-codeSamples:
        - lang: JavaScript
          source: |
            fetch("https://api-music-rose.vercel.app/canciones", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                Titulo: "Hacer el amor con otro",
                Duracion: "04:38",
                Genero: "Rock",
                IdAlbum: 10,
                IdArtista: 1
              })
            }).then(r => r.json()).then(console.log);
        - lang: Python
          source: |
            import requests
            payload = {
              "Titulo": "Hacer el amor con otro",
              "Duracion": "04:38",
              "Genero": "Rock",
              "IdAlbum": 10,
              "IdArtista": 1
            }
            r = requests.post("https://api-music-rose.vercel.app/canciones", json=payload)
            print(r.status_code, r.text)
        - lang: cURL / HTTPie
          source: |
            http POST https://api-music-rose.vercel.app/canciones \
              Titulo="Hacer el amor con otro" \
              Duracion="04:38" \
              Genero="Rock" \
              IdAlbum:=10 \
              IdArtista:=1
      responses:
        '201':
          description: Canción creada exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cancion'
        '400':
          description: Datos inválidos o faltantes
        '404':
          description: Álbum o Artista referenciado no existe
        '422':
          description: Error de validación (campos/formato inválido)
        '500':
          description: Error interno del servidor

  /canciones/{id}:
    get:
      summary: Obtener una canción por ID
      tags: [Canciones]
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Detalle de la canción
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cancion'
        '404':
          description: Canción no encontrada
        '500':
          description: Error interno del servidor

    put:
      summary: Actualizar una canción (completo)
      tags: [Canciones]
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      requestBody:
        description: Reemplaza todos los campos de la canción
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CancionInput'
            example:
              Titulo: "Nombre Editado"
              Duracion: "04:00"
              Genero: "Pop"
              IdAlbum: 10
              IdArtista: 1
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CancionInput'
      x-codeSamples:
        - lang: JavaScript
          source: |
            fetch("https://api-music-rose.vercel.app/canciones/1", {
              method: "PUT",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                Titulo: "Nombre Editado",
                Duracion: "04:00",
                Genero: "Pop",
                IdAlbum: 10,
                IdArtista: 1
              })
            }).then(r => r.json()).then(console.log);
        - lang: Python
          source: |
            import requests
            payload = {
              "Titulo": "Nombre Editado",
              "Duracion": "04:00",
              "Genero": "Pop",
              "IdAlbum": 10,
              "IdArtista": 1
            }
            r = requests.put("https://api-music-rose.vercel.app/canciones/1", json=payload)
            print(r.status_code, r.text)
        - lang: cURL / HTTPie
          source: |
            http PUT https://api-music-rose.vercel.app/canciones/1 \
              Titulo="Nombre Editado" \
              Duracion="04:00" \
              Genero="Pop" \
              IdAlbum:=10 \
              IdArtista:=1
      responses:
        '200':
          description: Canción actualizada correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cancion'
        '400':
          description: Datos inválidos
        '404':
          description: Canción, Álbum o Artista no encontrado
        '422':
          description: Error de validación
        '500':
          description: Error interno del servidor

    patch:
      summary: Actualizar parcialmente una canción
      tags: [Canciones]
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      requestBody:
        description: Campos a modificar de la canción (parcial)
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CancionPatch'
            example:
              Genero: "Indie"
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CancionPatch'
      x-codeSamples:
        - lang: JavaScript
          source: |
            fetch("https://api-music-rose.vercel.app/canciones/1", {
              method: "PATCH",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ Genero: "Indie" })
            }).then(r => r.json()).then(console.log);
        - lang: Python
          source: |
            import requests
            r = requests.patch("https://api-music-rose.vercel.app/canciones/1", json={"Genero":"Indie"})
            print(r.status_code, r.text)
        - lang: cURL / HTTPie
          source: |
            http PATCH https://api-music-rose.vercel.app/canciones/1 Genero="Indie"
      responses:
        '200':
          description: Canción actualizada parcialmente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cancion'
        '400':
          description: Datos inválidos
        '404':
          description: Canción no encontrada
        '422':
          description: Error de validación
        '500':
          description: Error interno del servidor

    delete:
      summary: Eliminar una canción
      tags: [Canciones]
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Canción eliminada correctamente
        '404':
          description: Canción no encontrada
        '500':
          description: Error interno del servidor

components:
  schemas:
    # Modelos de salida completos
    Artista:
      x-tags: ["Modelos"]  # <--- AGREGAR ESTO
      type: object
      properties:
        id:
          type: integer
          example: 1
        Nombre:
          type: string
          example: "Alejandra Guzmán"
        Nacionalidad:
          type: string
          example: "México"
        FechaNacimientos:
          type: string
          format: date
          example: "1968-02-09"

    Album:
      x-tags: ["Modelos"]  # <--- AGREGAR ESTO
      type: object
      properties:
        id:
          type: integer
          example: 10
        Titulo:
          type: string
          example: "Flor de Papel"
        FechaLanzamiento:
          type: string
          format: date
          example: "1991-10-15"
        IdArtista:
          type: integer
          example: 1

    Cancion:
      x-tags: ["Modelos"]  # <--- AGREGAR ESTO
      type: object
      properties:
        id:
          type: integer
          example: 45
        Titulo:
          type: string
          example: "Hacer el amor con otro"
        Duracion:
          type: string
          example: "04:38"
        Genero:
          type: string
          example: "Rock"
        IdAlbum:
          type: integer
          example: 10
        IdArtista:
          type: integer
          example: 1

    # Modelos de entrada (request bodies)
    ArtistaInput:
      x-tags: ["Modelos"]  # <--- AGREGAR ESTO
      type: object
      required:
        - Nombre
        - Nacionalidad
        - FechaNacimientos
      properties:
        Nombre:
          type: string
          example: "Alejandra Guzmán"
        Nacionalidad:
          type: string
          example: "México"
        FechaNacimientos:
          type: string
          format: date
          example: "1968-02-09"

    ArtistaPatch:
      x-tags: ["Modelos"]  # <--- AGREGAR ESTO
      type: object
      properties:
        Nombre:
          type: string
        Nacionalidad:
          type: string
        FechaNacimientos:
          type: string
          format: date

    AlbumInput:
      x-tags: ["Modelos"]  # <--- AGREGAR ESTO
      type: object
      required:
        - Titulo
        - IdArtista
      properties:
        Titulo:
          type: string
          example: "Flor de Papel"
        FechaLanzamiento:
          type: string
          format: date
          example: "1991-10-15"
        IdArtista:
          type: integer
          example: 1

    AlbumPatch:
      x-tags: ["Modelos"]  # <--- AGREGAR ESTO
      type: object
      properties:
        Titulo:
          type: string
        FechaLanzamiento:
          type: string
          format: date

    CancionInput:
      x-tags: ["Modelos"]  # <--- AGREGAR ESTO
      type: object
      required:
        - Titulo
        - IdAlbum
        - IdArtista
        - Genero
      properties:
        Titulo:
          type: string
          example: "Hacer el amor con otro"
        Duracion:
          type: string
          example: "04:38"
        Genero:
          type: string
          example: "Rock"
        IdAlbum:
          type: integer
          example: 10
        IdArtista:
          type: integer
          example: 1

    CancionPatch:
      x-tags: ["Modelos"]  # <--- AGREGAR ESTO
      type: object
      properties:
        Titulo:
          type: string
        Duracion:
          type: string
        Genero:
          type: string
        IdAlbum:
          type: integer
        IdArtista:
          type: integer