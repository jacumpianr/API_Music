openapi: 3.0.3
info:
  title: Music_API
  version: "1.0.0"
  description: >
    API REST para gestionar artistas, álbumes y canciones.
  contact:
    name: Soporte API

x-tagGroups:
  - name: General
    tags:
      - Artistas
      - Albumes
      - Canciones
  - name: Modelos de Datos
    tags:
      - Modelos

servers:
  - url: https://api-music-rose.vercel.app

tags:
  - name: Artistas
    description: Gestión de cantantes y bandas
  - name: Albumes
    description: Gestión de discos
  - name: Canciones
    description: Gestión de pistas de audio
  - name: Modelos
    description: Modelos de datos

paths:
  # ====================================================
  #                       ARTISTAS
  # ====================================================
  /artistas:
    get:
      summary: Obtener todos los artistas
      tags: [Artistas]
      x-codeSamples:
        - lang: JavaScript
          label: JS (fetch)
          source: |
            fetch("https://api-music-rose.vercel.app/artistas")
              .then(r => r.json())
              .then(console.log);
        - lang: cURL / HTTPie
          source: |
            curl https://api-music-rose.vercel.app/artistas
      responses:
        '200':
          description: Lista de artistas
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Artista'

    post:
      summary: Crear un artista
      tags: [Artistas]
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required: [Nombre, Nacionalidad, FechaNacimientos]
              properties:
                Nombre: { type: string }
                Nacionalidad: { type: string }
                FechaNacimientos: { type: string, format: date }
      x-codeSamples:
        - lang: JavaScript
          source: |
            const fd = new FormData();
            fd.append("Nombre", "Alejandra Guzmán");
            fd.append("Nacionalidad", "México");
            fd.append("FechaNacimientos", "1968-02-09");

            fetch("https://api-music-rose.vercel.app/artistas", {
              method: "POST",
              body: fd
            }).then(r => r.json()).then(console.log);
        - lang: Python
          source: |
            import requests
            data = {
              "Nombre": "Alejandra Guzmán",
              "Nacionalidad": "México",
              "FechaNacimientos": "1968-02-09"
            }
            r = requests.post("https://api-music-rose.vercel.app/artistas", data=data)
            print(r.json())
        - lang: cURL / HTTPie
          source: |
            http -f POST https://api-music-rose.vercel.app/artistas \
              Nombre="Alejandra Guzmán" \
              Nacionalidad="México" \
              FechaNacimientos="1968-02-09"
      responses:
        '201': { description: Artista creado }
        '400': { description: Datos inválidos }

  /artistas/{id}:
    get:
      summary: Obtener un artista por ID
      tags: [Artistas]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: integer }
      responses:
        '200':
          description: Detalles del artista
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Artista'
        '404': { description: Artista no encontrado }

    put:
      summary: Actualizar un artista (completo)
      tags: [Artistas]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: integer }
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                Nombre: { type: string }
                Nacionalidad: { type: string }
                FechaNacimientos: { type: string, format: date }
      x-codeSamples:
        - lang: JavaScript
          source: |
            const fd = new FormData();
            fd.append("Nombre", "Nuevo Nombre");
            fd.append("Nacionalidad", "Argentina");
            fd.append("FechaNacimientos", "1980-01-01");

            fetch("https://api-music-rose.vercel.app/artistas/1", {
              method: "PUT",
              body: fd
            }).then(r => r.json()).then(console.log);
        - lang: Python
          source: |
            import requests
            data = {
              "Nombre": "Nuevo Nombre",
              "Nacionalidad": "Argentina",
              "FechaNacimientos": "1980-01-01"
            }
            print(requests.put("https://api-music-rose.vercel.app/artistas/1", data=data).json())
        - lang: cURL / HTTPie
          source: |
            http -f PUT https://api-music-rose.vercel.app/artistas/1 \
              Nombre="Nuevo Nombre" \
              Nacionalidad="Argentina" \
              FechaNacimientos="1980-01-01"
      responses:
        '200': { description: Artista actualizado }
        '404': { description: No encontrado }

    patch:
      summary: Actualizar parcialmente un artista
      tags: [Artistas]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: integer }
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                Nombre: { type: string }
                Nacionalidad: { type: string }
                FechaNacimientos: { type: string, format: date }
      x-codeSamples:
        - lang: JavaScript
          source: |
            const fd = new FormData();
            fd.append("Nombre", "Nombre Editado");

            fetch("https://api-music-rose.vercel.app/artistas/1", {
              method: "PATCH",
              body: fd
            }).then(r => r.json()).then(console.log);
        - lang: Python
          source: |
            import requests
            print(requests.patch(
              "https://api-music-rose.vercel.app/artistas/1",
              data={"Nombre": "Nombre Editado"}
            ).json())
        - lang: cURL / HTTPie
          source: |
            http -f PATCH https://api-music-rose.vercel.app/artistas/1 \
              Nombre="Nombre Editado"
      responses:
        '200': { description: Actualizado }
        '404': { description: No encontrado }

    delete:
      summary: Eliminar un artista
      tags: [Artistas]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: integer }
      responses:
        '200': { description: Eliminado }
        '404': { description: No encontrado }

  # ====================================================
  #                       ALBUMES
  # ====================================================
  /albumes:
    get:
      summary: Obtener todos los álbumes
      tags: [Albumes]
      responses:
        '200':
          description: Lista de álbumes
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Album'

    post:
      summary: Crear un álbum
      tags: [Albumes]
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required: [Titulo, IdArtista]
              properties:
                Titulo: { type: string }
                FechaLanzamiento: { type: string, format: date }
                IdArtista: { type: integer }
      x-codeSamples:
        - lang: JavaScript
          source: |
            const fd = new FormData();
            fd.append("Titulo", "Album Nuevo");
            fd.append("IdArtista", "1");
            fd.append("FechaLanzamiento", "2020-01-01");

            fetch("https://api-music-rose.vercel.app/albumes", {
              method: "POST",
              body: fd
            });
        - lang: Python
          source: |
            import requests
            data = {
              "Titulo": "Album Nuevo",
              "IdArtista": 1,
              "FechaLanzamiento": "2020-01-01"
            }
            print(requests.post("https://api-music-rose.vercel.app/albumes", data=data).json())
        - lang: cURL / HTTPie
          source: |
            http -f POST https://api-music-rose.vercel.app/albumes \
              Titulo="Album Nuevo" \
              IdArtista=1 \
              FechaLanzamiento="2020-01-01"
      responses:
        '201': { description: Álbum creado }
        '404': { description: Artista no existe }

  /albumes/{id}:
    get:
      summary: Obtener un álbum por ID
      tags: [Albumes]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: integer }
      responses:
        '200':
          description: Detalle del álbum
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Album'
        '404': { description: No encontrado }

    put:
      summary: Actualizar álbum (completo)
      tags: [Albumes]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: integer }
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                Titulo: { type: string }
                FechaLanzamiento: { type: string, format: date }
                IdArtista: { type: integer }
      x-codeSamples:
        - lang: JavaScript
          source: |
            const fd = new FormData();
            fd.append("Titulo", "Título Editado");
            fd.append("IdArtista", "1");

            fetch("https://api-music-rose.vercel.app/albumes/1", {
              method: "PUT",
              body: fd
            });
        - lang: Python
          source: |
            import requests
            print(requests.put(
              "https://api-music-rose.vercel.app/albumes/1",
              data={"Titulo": "Título Editado", "IdArtista": 1}
            ).json())
        - lang: cURL / HTTPie
          source: |
            http -f PUT https://api-music-rose.vercel.app/albumes/1 \
              Titulo="Título Editado" \
              IdArtista=1
      responses:
        '200': { description: Actualizado }
        '404': { description: No encontrado }

    patch:
      summary: Actualizar parcialmente un álbum
      tags: [Albumes]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: integer }
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                Titulo: { type: string }
                FechaLanzamiento: { type: string, format: date }
      x-codeSamples:
        - lang: JavaScript
          source: |
            const fd = new FormData();
            fd.append("Titulo", "Nuevo Título");

            fetch("https://api-music-rose.vercel.app/albumes/1", {
              method: "PATCH",
              body: fd
            });
        - lang: Python
          source: |
            import requests
            print(requests.patch(
              "https://api-music-rose.vercel.app/albumes/1",
              data={"Titulo": "Nuevo Título"}
            ).json())
        - lang: cURL / HTTPie
          source: |
            http -f PATCH https://api-music-rose.vercel.app/albumes/1 \
              Titulo="Nuevo Título"
      responses:
        '200': { description: Actualizado }
        '404': { description: No encontrado }

    delete:
      summary: Eliminar un álbum
      tags: [Albumes]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: integer }
      responses:
        '200': { description: Eliminado }
        '404': { description: No encontrado }

  # ====================================================
  #                       CANCIONES
  # ====================================================
  /canciones:
    get:
      summary: Obtener todas las canciones
      tags: [Canciones]
      responses:
        '200':
          description: Lista de canciones
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Cancion'

    post:
      summary: Crear canción
      tags: [Canciones]
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required: [Titulo, IdAlbum, IdArtista, Genero]
              properties:
                Titulo: { type: string }
                Duracion: { type: string }
                IdAlbum: { type: integer }
                IdArtista: { type: integer }
                Genero: { type: string }
      x-codeSamples:
        - lang: JavaScript
          source: |
            const fd = new FormData();
            fd.append("Titulo", "Nueva Canción");
            fd.append("Genero", "Rock");
            fd.append("IdAlbum", "1");
            fd.append("IdArtista", "1");

            fetch("https://api-music-rose.vercel.app/canciones", {
              method: "POST",
              body: fd
            });
        - lang: Python
          source: |
            import requests
            data = {
              "Titulo": "Nueva Canción",
              "Genero": "Rock",
              "IdAlbum": 1,
              "IdArtista": 1
            }
            print(requests.post("https://api-music-rose.vercel.app/canciones", data=data).json())
        - lang: cURL / HTTPie
          source: |
            http -f POST https://api-music-rose.vercel.app/canciones \
              Titulo="Nueva Canción" \
              Genero="Rock" \
              IdAlbum=1 \
              IdArtista=1
      responses:
        '201': { description: Canción creada }

  /canciones/{id}:
    get:
      summary: Obtener canción por ID
      tags: [Canciones]
      parameters:
        - in: path
          name: id
          schema: { type: integer }
          required: true
      responses:
        '200':
          description: Detalle de canción
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cancion'
        '404': { description: No encontrada }

    put:
      summary: Actualizar canción (completo)
      tags: [Canciones]
      parameters:
        - in: path
          name: id
          schema: { type: integer }
          required: true
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                Titulo: { type: string }
                Duracion: { type: string }
                Genero: { type: string }
                IdAlbum: { type: integer }
                IdArtista: { type: integer }
      x-codeSamples:
        - lang: JavaScript
          source: |
            const fd = new FormData();
            fd.append("Titulo", "Editada");
            fd.append("Genero", "Pop");

            fetch("https://api-music-rose.vercel.app/canciones/1", {
              method: "PUT",
              body: fd
            });
        - lang: Python
          source: |
            import requests
            print(requests.put(
              "https://api-music-rose.vercel.app/canciones/1",
              data={"Titulo": "Editada", "Genero": "Pop"}
            ).json())
        - lang: cURL / HTTPie
          source: |
            http -f PUT https://api-music-rose.vercel.app/canciones/1 \
              Titulo="Editada" \
              Genero="Pop"
      responses:
        '200': { description: Actualizada }

    patch:
      summary: Actualizar parcialmente canción
      tags: [Canciones]
      parameters:
        - in: path
          name: id
          schema: { type: integer }
          required: true
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                Titulo: { type: string }
                Genero: { type: string }
      x-codeSamples:
        - lang: JavaScript
          source: |
            const fd = new FormData();
            fd.append("Titulo", "Nombre Modificado");

            fetch("https://api-music-rose.vercel.app/canciones/1", {
              method: "PATCH",
              body: fd
            });
        - lang: Python
          source: |
            import requests
            print(requests.patch(
              "https://api-music-rose.vercel.app/canciones/1",
              data={"Titulo": "Nombre Modificado"}
            ).json())
        - lang: cURL / HTTPie
          source: |
            http -f PATCH https://api-music-rose.vercel.app/canciones/1 \
              Titulo="Nombre Modificado"
      responses:
        '200': { description: Actualizada }

    delete:
      summary: Eliminar canción
      tags: [Canciones]
      parameters:
        - in: path
          name: id
          schema: { type: integer }
          required: true
      responses:
        '200': { description: Eliminada }
        '404': { description: No encontrada }

# ====================================================
#                      MODELOS
# ====================================================
components:
  schemas:
    Artista:
      type: object
      properties:
        id: { type: integer, example: 1 }
        Nombre: { type: string, example: Alejandra Guzmán }
        Nacionalidad: { type: string, example: México }
        FechaNacimientos: { type: string, format: date, example: "1968-02-09" }

    Album:
      type: object
      properties:
        id: { type: integer, example: 1 }
        Titulo: { type: string, example: Flor de Papel }
        FechaLanzamiento: { type: string, format: date, example: "1991-10-15" }
        IdArtista: { type: integer, example: 1 }

    Cancion:
      type: object
      properties:
        id: { type: integer, example: 1 }
        Titulo: { type: string, example: Hacer el amor con otro }
        Duracion: { type: string, example: "04:38" }
        Genero: { type: string, example: Rock }
        IdAlbum: { type: integer, example: 10 }
        IdArtista: { type: integer, example: 1 }
